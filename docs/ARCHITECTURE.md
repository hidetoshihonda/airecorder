# AI Voice Recorder - ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è§£èª¬

> ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€AI Voice Recorderã®æŠ€è¡“çš„ãªä»•çµ„ã¿ã‚’ç†è§£ã—ãŸã„æ–¹å‘ã‘ã«ã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ä½¿ç”¨ã—ã¦ã„ã‚‹Azureã‚µãƒ¼ãƒ“ã‚¹ã€ãŠã‚ˆã³ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’è§£èª¬ã—ã¾ã™ã€‚

## ğŸ“Œ æ¦‚è¦

AI Voice Recorderã¯ã€éŸ³å£°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ–‡å­—èµ·ã“ã—ã—ã€ç¿»è¨³ãƒ»è¦ç´„ã¾ã§è¡Œã†Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ã™ã¹ã¦Microsoft Azureã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã—ã¦æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½
- ğŸ¤ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°èªè­˜ï¼ˆæ–‡å­—èµ·ã“ã—ï¼‰
- ğŸ—£ï¸ è©±è€…è­˜åˆ¥ï¼ˆèª°ãŒè©±ã—ã¦ã„ã‚‹ã‹è‡ªå‹•åˆ¤åˆ¥ï¼‰
- ğŸŒ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç¿»è¨³ï¼ˆæ—¥æœ¬èªâ†”è‹±èªãªã©ï¼‰
- ğŸ“ AIè­°äº‹éŒ²ç”Ÿæˆï¼ˆGPT-4ã«ã‚ˆã‚‹è¦ç´„ï¼‰
- ğŸ’¾ éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ãƒ»å±¥æ­´ç®¡ç†

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ–ãƒ©ã‚¦ã‚¶                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Next.js (React) ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰                                         â”‚â”‚
â”‚  â”‚  â”œâ”€ éŸ³å£°ã‚­ãƒ£ãƒ—ãƒãƒ£ (MediaRecorder API)                                  â”‚â”‚
â”‚  â”‚  â”œâ”€ Speech SDK (WebSocketæ¥ç¶š)                                          â”‚â”‚
â”‚  â”‚  â””â”€ UI/UX ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ                                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                    â”‚                    â”‚
                â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Azure Speech Services â”‚ â”‚ Azure Translator â”‚ â”‚  Azure Static Web Apps      â”‚
â”‚  (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°èªè­˜) â”‚ â”‚  (ãƒ†ã‚­ã‚¹ãƒˆç¿»è¨³)   â”‚ â”‚  (é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°)  â”‚
â”‚  â”œâ”€ Speech-to-Text    â”‚ â”‚                  â”‚ â”‚  â”œâ”€ GitHubèªè¨¼              â”‚
â”‚  â””â”€ Speaker Diarizationâ”‚ â”‚                  â”‚ â”‚  â””â”€ CDNé…ä¿¡                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                          â”‚
                                                          â”‚ BYOF (Linked Backend)
                                                          â–¼
                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                               â”‚  Azure Functions (API)       â”‚
                                               â”‚  â”œâ”€ éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿CRUD           â”‚
                                               â”‚  â”œâ”€ è­°äº‹éŒ²ç”ŸæˆAPI            â”‚
                                               â”‚  â””â”€ Blob SAS URLç”Ÿæˆ         â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                          â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â–¼                                 â–¼                     â–¼
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚  Azure Cosmos DB   â”‚          â”‚  Azure Blob     â”‚    â”‚  Azure OpenAI   â”‚
             â”‚  (éŒ²éŸ³ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿)   â”‚          â”‚  Storage        â”‚    â”‚  (GPT-4)        â”‚
             â”‚  â””â”€ userIdåˆ†é›¢     â”‚          â”‚  (éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«)  â”‚    â”‚  (è­°äº‹éŒ²ç”Ÿæˆ)    â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ä½¿ç”¨æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| **Next.js** | 16.1.6 | Reactãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆApp Router, Static Exportï¼‰ |
| **React** | 19.2.3 | UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| **TypeScript** | 5.x | å‹å®‰å…¨ãªé–‹ç™º |
| **Tailwind CSS** | 4.x | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |
| **Radix UI** | å„ç¨® | ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| **Speech SDK** | 1.47.0 | Azure Speech Servicesã¸ã®WebSocketæ¥ç¶š |

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| **Azure Functions** | v4 | ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹API |
| **Node.js** | 20 | ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  |
| **TypeScript** | 5.7 | å‹å®‰å…¨ãªé–‹ç™º |

### ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | ç‰¹å¾´ |
|----------|------|------|
| **Azure Cosmos DB** | éŒ²éŸ³ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿å­˜ | NoSQLã€userId ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰² |
| **Azure Blob Storage** | éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ |

### AI/Cognitiveã‚µãƒ¼ãƒ“ã‚¹

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | æ–™é‡‘ä½“ç³» |
|----------|------|---------|
| **Azure Speech Services** | éŸ³å£°èªè­˜ã€è©±è€…è­˜åˆ¥ | S0å¾“é‡èª²é‡‘ï¼ˆç´„$1/æ™‚é–“ï¼‰ |
| **Azure Translator** | ãƒ†ã‚­ã‚¹ãƒˆç¿»è¨³ | å¾“é‡èª²é‡‘ï¼ˆç´„$10/100ä¸‡æ–‡å­—ï¼‰ |
| **Azure OpenAI (GPT-4)** | è­°äº‹éŒ²è‡ªå‹•ç”Ÿæˆ | å¾“é‡èª²é‡‘ |

### ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°/èªè¨¼

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” |
|----------|------|
| **Azure Static Web Apps** | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã€èªè¨¼ã€CDN |
| **GitHub OAuth** | ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆSWAçµ„ã¿è¾¼ã¿èªè¨¼ï¼‰ |

---

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è©³ç´°

### 1. éŸ³å£°èªè­˜ãƒ•ãƒ­ãƒ¼

```
[ãƒã‚¤ã‚¯] â†’ [ãƒ–ãƒ©ã‚¦ã‚¶] â†’ [WebSocket] â†’ [Azure Speech Services]
                                              â”‚
              â† â† â† ä¸­é–“çµæœï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰ â† â†â”‚
              â† â† â† ç¢ºå®šçµæœ + è©±è€…ID â† â† â† â† â”‚
```

**æŠ€è¡“çš„ãªè©³ç´°:**

1. **éŸ³å£°ã‚­ãƒ£ãƒ—ãƒãƒ£**: ãƒ–ãƒ©ã‚¦ã‚¶ã®`MediaRecorder API`ã§ãƒã‚¤ã‚¯éŸ³å£°ã‚’å–å¾—
2. **WebSocketæ¥ç¶š**: Speech SDKãŒè‡ªå‹•çš„ã«Azure Speech Servicesã¨ã®å¸¸æ™‚æ¥ç¶šã‚’ç®¡ç†
3. **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°èªè­˜**: éŸ³å£°ãƒ‡ãƒ¼ã‚¿ã¯å°ã•ãªãƒãƒ£ãƒ³ã‚¯ï¼ˆ100msç¨‹åº¦ï¼‰ã§é€ä¿¡
4. **ä¸­é–“çµæœ**: èªè­˜é€”ä¸­ã®ãƒ†ã‚­ã‚¹ãƒˆãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¿”å´ï¼ˆç°è‰²ã§è¡¨ç¤ºï¼‰
5. **ç¢ºå®šçµæœ**: æ–‡ãŒå®Œçµã™ã‚‹ã¨ç¢ºå®šãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦è¿”å´
6. **è©±è€…è­˜åˆ¥**: `ConversationTranscriber`ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€å„ç™ºè©±ã«`speakerId`ãŒä»˜ä¸

**ã‚³ãƒ¼ãƒ‰ä¾‹ï¼ˆuseSpeechRecognition.ts ã‚ˆã‚ŠæŠœç²‹ï¼‰:**
```typescript
// Speech SDKã®è¨­å®š
const speechConfig = SpeechSDK.SpeechConfig.fromSubscription(subscriptionKey, region);
speechConfig.speechRecognitionLanguage = language;

// è©±è€…è­˜åˆ¥ã‚’æœ‰åŠ¹ã«ã—ãŸå ´åˆ
const transcriber = new SpeechSDK.ConversationTranscriber(speechConfig, audioConfig);

// ç¢ºå®šçµæœã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
transcriber.transcribed = (sender, event) => {
  const text = event.result.text;
  const speakerId = event.result.speakerId; // "Guest-1", "Guest-2" ãªã©
  // UIã«åæ˜ 
};
```

### 2. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç¿»è¨³ãƒ•ãƒ­ãƒ¼

```
[ç¢ºå®šãƒ†ã‚­ã‚¹ãƒˆ] â†’ [Azure Translator REST API] â†’ [ç¿»è¨³çµæœ]
     â”‚                                              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 100-200ms ç¨‹åº¦ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
```

**æŠ€è¡“çš„ãªè©³ç´°:**

1. **ãƒˆãƒªã‚¬ãƒ¼**: éŸ³å£°èªè­˜ã§æ–‡ãŒç¢ºå®šã™ã‚‹ãŸã³ã«ç¿»è¨³APIã‚’å‘¼ã³å‡ºã—
2. **REST API**: `POST https://api.cognitive.microsofttranslator.com/translate`
3. **è¨€èªã‚³ãƒ¼ãƒ‰å¤‰æ›**: `ja-JP` â†’ `ja`ã€`en-US` â†’ `en` ã«å¤‰æ›ã—ã¦é€ä¿¡
4. **èªè¨¼**: `Ocp-Apim-Subscription-Key` ãƒ˜ãƒƒãƒ€ãƒ¼ã§APIã‚­ãƒ¼ã‚’é€ä¿¡

**ã‚³ãƒ¼ãƒ‰ä¾‹ï¼ˆuseTranslation.ts ã‚ˆã‚ŠæŠœç²‹ï¼‰:**
```typescript
const response = await fetch(
  `${endpoint}/translate?api-version=3.0&from=${fromLang}&to=${toLang}`,
  {
    method: "POST",
    headers: {
      "Ocp-Apim-Subscription-Key": subscriptionKey,
      "Ocp-Apim-Subscription-Region": region,
      "Content-Type": "application/json",
    },
    body: JSON.stringify([{ text }]),
  }
);
```

### 3. è­°äº‹éŒ²ç”Ÿæˆãƒ•ãƒ­ãƒ¼

```
[å…¨æ–‡ãƒ†ã‚­ã‚¹ãƒˆ] â†’ [Azure Functions] â†’ [Azure OpenAI] â†’ [æ§‹é€ åŒ–ã•ã‚ŒãŸè­°äº‹éŒ²]
```

**æŠ€è¡“çš„ãªè©³ç´°:**

1. **å…¥åŠ›**: éŸ³å£°èªè­˜ã§å¾—ã‚‰ã‚ŒãŸå…¨æ–‡ãƒ†ã‚­ã‚¹ãƒˆ
2. **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°**: ä¼šè­°ã‚¿ã‚¤ãƒ—åˆ¥ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆå®šä¾‹ä¼šè­°ã€1on1ã€å•†è«‡ãªã©ï¼‰
3. **å‡ºåŠ›å½¢å¼**: JSONå½¢å¼ã§æ§‹é€ åŒ–ï¼ˆæ¦‚è¦ã€é‡è¦ãƒã‚¤ãƒ³ãƒˆã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ï¼‰
4. **è¨€èªå¯¾å¿œ**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§å‡ºåŠ›è¨€èªã‚’æŒ‡å®šå¯èƒ½

**ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹:**
```
ã‚ãªãŸã¯ä¼šè­°ã®è­°äº‹éŒ²ã‚’ä½œæˆã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚
ä¸ãˆã‚‰ã‚ŒãŸæ–‡å­—èµ·ã“ã—ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ã€æ§‹é€ åŒ–ã•ã‚ŒãŸè­°äº‹éŒ²ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

å‡ºåŠ›ã¯å¿…ãšä»¥ä¸‹ã®JSONå½¢å¼ã§è¿”ã—ã¦ãã ã•ã„ï¼š
{
  "overview": "ä¼šè­°ã®æ¦‚è¦ï¼ˆ2-3æ–‡ã§ç°¡æ½”ã«ï¼‰",
  "keyPoints": ["é‡è¦ãƒã‚¤ãƒ³ãƒˆ1", "é‡è¦ãƒã‚¤ãƒ³ãƒˆ2", ...],
  "actionItems": [
    {
      "id": "1",
      "description": "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã®èª¬æ˜",
      "assignee": "æ‹…å½“è€…å",
      "dueDate": "æœŸé™"
    }
  ]
}
```

### 4. ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ•ãƒ­ãƒ¼

```
[éŒ²éŸ³çµ‚äº†] â†’ [ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿] â†’ [Cosmos DB]
          â†’ [éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«] â†’ [Blob Storage]
```

**Cosmos DB ã‚¹ã‚­ãƒ¼ãƒ:**
```typescript
interface Recording {
  id: string;              // ä¸€æ„ã®ID (UUID)
  userId: string;          // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ†é›¢ï¼‰
  title: string;           // éŒ²éŸ³ã‚¿ã‚¤ãƒˆãƒ«
  transcript: string;      // æ–‡å­—èµ·ã“ã—å…¨æ–‡
  segments: Segment[];     // è©±è€…åˆ¥ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ
  sourceLanguage: string;  // å…ƒã®è¨€èª
  summary?: Summary;       // AIç”Ÿæˆè­°äº‹éŒ²
  audioBlobUrl?: string;   // éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«URL
  createdAt: string;       // ä½œæˆæ—¥æ™‚
  updatedAt: string;       // æ›´æ–°æ—¥æ™‚
}
```

---

## ğŸ” èªè¨¼ãƒ»èªå¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### Azure Static Web Apps çµ„ã¿è¾¼ã¿èªè¨¼

```
[ãƒ–ãƒ©ã‚¦ã‚¶] â†’ [SWA] â†’ [/.auth/login/github] â†’ [GitHub OAuth]
                                                   â”‚
              â† â† â† èªè¨¼Cookieç™ºè¡Œ â† â† â† â† â† â† â† â†â”‚
```

**ãƒ•ãƒ­ãƒ¼:**

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¿è­·ãƒšãƒ¼ã‚¸ï¼ˆ/recording, /historyï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹
2. SWAã®ãƒ«ãƒ¼ãƒˆè¨­å®šã«ã‚ˆã‚Šã€æœªèªè¨¼ã®å ´åˆã¯401ã‚’è¿”ã™
3. 401ã®å ´åˆã€`/.auth/login/github`ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
4. GitHubã§OAuthèªè¨¼
5. èªè¨¼æˆåŠŸå¾Œã€SWAãŒèªè¨¼Cookieã‚’ç™ºè¡Œ
6. ä»¥é™ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«CookieãŒè‡ªå‹•ä»˜ä¸

**APIèªè¨¼ï¼ˆBYOF - Bring Your Own Functionsï¼‰:**

```
[ãƒ–ãƒ©ã‚¦ã‚¶] â†’ [SWA] â†’ [x-ms-client-principal ãƒ˜ãƒƒãƒ€ãƒ¼ä»˜ä¸] â†’ [Azure Functions]
                                                                â”‚
                                                   ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’Base64ãƒ‡ã‚³ãƒ¼ãƒ‰
                                                                â”‚
                                                   { userId, userDetails, userRoles }
```

**èªè¨¼ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆapi/src/utils/auth.ts ã‚ˆã‚Šï¼‰:**
```typescript
export function getClientPrincipal(request: HttpRequest): ClientPrincipal | null {
  const header = request.headers.get("x-ms-client-principal");
  if (!header) return null;

  const decoded = Buffer.from(header, "base64").toString("utf-8");
  return JSON.parse(decoded);
}
```

---

## ğŸŒ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ§‹æˆ

### ç’°å¢ƒ

| ç’°å¢ƒ | URL | ç”¨é€” |
|------|-----|------|
| Production | `proud-rock-06bba6200.2.azurestaticapps.net` | æœ¬ç•ªç’°å¢ƒ |
| Local | `localhost:3000` | é–‹ç™ºç’°å¢ƒ |

### Azureãƒªã‚½ãƒ¼ã‚¹ä¸€è¦§

| ãƒªã‚½ãƒ¼ã‚¹å | ç¨®é¡ | ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ | SKU |
|-----------|------|-----------|-----|
| `rg-airecorder-dev` | ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ— | Japan East | - |
| `swa-airecorder-dev` | Static Web Apps | East Asia | Standard |
| `func-airecorder-dev` | Functions App | Japan East | Consumption |
| `cosmos-airecorder-dev` | Cosmos DB | Japan East | Serverless |
| `st-airecorder-dev` | Storage Account | Japan East | Standard LRS |
| `speech-airecorder-dev` | Speech Services | Japan East | S0 |
| `translator-airecorder-dev` | Translator | Global | S1 |
| `openai-airecorder-dev` | OpenAI | East US | S0 |

### CI/CD

ç¾åœ¨ã¯æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼š

```powershell
# API ãƒ‡ãƒ—ãƒ­ã‚¤
cd api
npm run build
func azure functionapp publish func-airecorder-dev

# Web ãƒ‡ãƒ—ãƒ­ã‚¤  
cd web
npm run build
swa deploy ./out --env production --app-name swa-airecorder-dev
```

---

## ğŸ“Š ã‚³ã‚¹ãƒˆæ§‹é€ 

### æœˆé¡æ¦‚ç®—ï¼ˆä¸­ç¨‹åº¦ã®åˆ©ç”¨ã‚’æƒ³å®šï¼‰

| ã‚µãƒ¼ãƒ“ã‚¹ | ç„¡æ–™æ  | è¶…éæ™‚æ–™é‡‘ | æ¦‚ç®—ã‚³ã‚¹ãƒˆ |
|----------|--------|-----------|-----------|
| Static Web Apps | Standard: $9/æœˆ | - | $9 |
| Functions | 100ä¸‡å›/æœˆç„¡æ–™ | $0.20/100ä¸‡å› | ~$0 |
| Cosmos DB | 1000 RU/sç„¡æ–™ | $0.008/RU/æ™‚é–“ | ~$5 |
| Blob Storage | 5GBç„¡æ–™ | $0.02/GB | ~$1 |
| Speech Services | ãªã— | $1/æ™‚é–“ | $10-50 |
| Translator | 200ä¸‡æ–‡å­—/æœˆç„¡æ–™ | $10/100ä¸‡æ–‡å­— | ~$5 |
| OpenAI (GPT-4) | ãªã— | å…¥åŠ›$30, å‡ºåŠ›$60/100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³ | $5-20 |
| **åˆè¨ˆ** | | | **$35-100/æœˆ** |

â€» åˆ©ç”¨é »åº¦ã«ã‚ˆã‚Šå¤§ããå¤‰å‹•

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

| ç—‡çŠ¶ | åŸå›  | å¯¾å‡¦ |
|------|------|------|
| ã€ŒQuota exceededã€ã‚¨ãƒ©ãƒ¼ | Speech Servicesç„¡æ–™æ è¶…é | S0ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ |
| éŸ³å£°èªè­˜ãŒé–‹å§‹ã—ãªã„ | ãƒã‚¤ã‚¯æ¨©é™æœªè¨±å¯ | ãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šç¢ºèª |
| ç¿»è¨³ãŒå‹•ä½œã—ãªã„ | APIã‚­ãƒ¼æœªè¨­å®š | ç’°å¢ƒå¤‰æ•°ç¢ºèª |
| èªè¨¼å¾Œã‚‚401ã‚¨ãƒ©ãƒ¼ | BYOFè¨­å®šæ¼ã‚Œ | `az staticwebapp backends link`å®Ÿè¡Œ |

### ãƒ­ã‚°ç¢ºèªæ–¹æ³•

```powershell
# Functions ã®ãƒ­ã‚°
func azure functionapp logstream func-airecorder-dev

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ Insightsï¼ˆè¨­å®šæ¸ˆã¿ã®å ´åˆï¼‰
az monitor app-insights query --app <app-insights-name> --analytics-query "traces | take 100"
```

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Azure Speech Services ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://learn.microsoft.com/azure/cognitive-services/speech-service/)
- [Azure Static Web Apps èªè¨¼](https://learn.microsoft.com/azure/static-web-apps/authentication-authorization)
- [Azure Functions Node.js é–‹ç™ºã‚¬ã‚¤ãƒ‰](https://learn.microsoft.com/azure/azure-functions/functions-reference-node)
- [Next.js Static Export](https://nextjs.org/docs/app/building-your-application/deploying/static-exports)
- [Cosmos DB ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³è¨­è¨ˆ](https://learn.microsoft.com/azure/cosmos-db/partitioning-overview)

---

## ğŸ“ æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | å†…å®¹ |
|------|------|
| 2026-02-08 | åˆç‰ˆä½œæˆ |
